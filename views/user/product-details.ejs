<%- include("../../views/partials/user/header") %>
<head>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick-theme.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.js"></script>


<style>
/* Main Layout Styles */
.main {
    padding: 40px 0;
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
}

.breadcrumb-wrap {
    padding: 15px 0;
    background: white;
    box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    margin-bottom: 40px;
}

.breadcrumb {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
    color: #666;
}

.breadcrumb a {
    color: #046963;
    text-decoration: none;
    transition: color 0.3s ease;
}

.breadcrumb a:hover {
    color: #035750;
}

/* Product Gallery Styles */
.detail-gallery {
    background: white;
    padding: 20px;
    border-radius: 15px;
    box-shadow: 0 5px 20px rgba(0,0,0,0.05);
}

.product-image-slider {
    position: relative;
    margin-bottom: 20px;
}

.product-image-slider figure {
    margin: 0;
    overflow: hidden;
    border-radius: 15px;
    cursor: zoom-in;
}

.product-image-slider img {
    width: 100%;
    height: 500px;
    object-fit: cover;
    transition: transform 0.5s ease;
}

.product-image-slider img:hover {
    transform: scale(1.05);
}

/* Thumbnail Slider */
.slider-nav-thumbnails {
    display: flex;
    gap: 15px;
    margin-top: 20px;
    padding: 10px;
    background: #f8f9fa;
    border-radius: 10px;
}

.slider-nav-thumbnails div {
    flex: 0 0 80px;
    height: 80px;
    border-radius: 8px;
    overflow: hidden;
    cursor: pointer;
    border: 2px solid transparent;
    transition: all 0.3s ease;
}

.slider-nav-thumbnails div.slick-current {
    border-color: #046963;
    transform: translateY(-3px);
    box-shadow: 0 5px 15px rgba(4, 105, 99, 0.2);
}

/* Product Info Styles */
.detail-info {
    background: white;
    padding: 30px;
    border-radius: 15px;
    box-shadow: 0 5px 20px rgba(0,0,0,0.05);
}

.title-detail {
    font-size: 32px;
    margin-bottom: 20px;
    color: #333;
    font-weight: 600;
}

/* Price Styles */
.product-price-cover {
    margin: 25px 0;
    padding: 20px;
    background: #f8f9fa;
    border-radius: 10px;
}

.text-brand {
    color: #046963;
    font-size: 28px;
    font-weight: 600;
}

.old-price {
    color: #888;
    text-decoration: line-through;
    margin-left: 15px;
}

.save-price {
    background: #046963;
    color: white;
    padding: 5px 15px;
    border-radius: 20px;
    font-size: 14px;
    margin-left: 15px;
}

/* Quantity and Add to Cart */
.detail-extralink {
    display: flex;
    gap: 20px;
    margin: 30px 0;
    align-items: center;
}

.detail-qty {
    display: flex;
    align-items: center;
    background: #f8f9fa;
    border-radius: 25px;
    padding: 5px 15px;
    border: 2px solid #046963;
}

.qty-down, .qty-up {
    width: 30px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: white;
    border-radius: 50%;
    cursor: pointer;
    color: #046963;
    transition: all 0.3s ease;
}

.qty-down:hover, .qty-up:hover {
    background: #046963;
    color: white;
}

.qty-val {
    width: 40px;
    text-align: center;
    font-size: 18px;
    font-weight: 600;
    color: #046963;
}

.button-add-to-cart {
    background: #046963;
    color: white;
    border: none;
    padding: 15px 40px;
    border-radius: 25px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 10px;
}

.button-add-to-cart:hover {
    background: #035750;
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(4, 105, 99, 0.2);
}

/* Product Meta */
.product-meta {
    list-style: none;
    padding: 20px;
    margin-top: 30px;
    background: #f8f9fa;
    border-radius: 10px;
}

.product-meta li {
    margin-bottom: 15px;
    color: #666;
    display: flex;
    align-items: center;
    gap: 10px;
}

.product-meta li i {
    color: #046963;
}

/* Product Features */
.product_sort_info {
    background: #f8f9fa;
    padding: 20px;
    border-radius: 10px;
    margin: 20px 0;
}

.product_sort_info ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

.product_sort_info li {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 15px;
    color: #666;
}

.product_sort_info li i {
    color: #046963;
    font-size: 18px;
}

/* Image Zoom Effect */
.zoomed {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0,0,0,0.9);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    backdrop-filter: blur(5px);
}

.zoomed img {
    max-width: 90%;
    max-height: 90vh;
    object-fit: contain;
    border-radius: 15px;
    box-shadow: 0 5px 30px rgba(0,0,0,0.3);
}

/* Responsive Design */
@media (max-width: 768px) {
    .detail-gallery {
        margin-bottom: 30px;
    }

    .product-image-slider img {
        height: 350px;
    }

    .slider-nav-thumbnails div {
        flex: 0 0 60px;
        height: 60px;
    }

    .title-detail {
        font-size: 24px;
    }

    .detail-extralink {
        flex-direction: column;
    }

    .button-add-to-cart {
        width: 100%;
        justify-content: center;
    }
}

</style>
<main class="main">
 <div class="page-header breadcrumb-wrap">
     <div class="container">
         <div class="breadcrumb">
             <a href="/" rel="nofollow">Home</a>
             <span><a href="/shop" rel="nofollow"> Fashion</a></span>
             <span></span>product detail page
         </div>
     </div>
 </div>
 <section class="mt-50 mb-50">
     <div class="container">
         <div class="row">
             <div class="col-lg-9">
                 <div class="product-detail accordion-detail">
                     <div class="row mb-50">
                         <div class="col-md-6 col-sm-12 col-xs-12">
                             <div class="detail-gallery">
                                 <div class="zoom-icon"><i class="bi bi-search"></i></div>
                                 <div class="product-image-slider">
                                     <figure class="border-radius-10">
                                         <img src="<%=product.productImage[0]%>" alt="produt Image">
                                     </figure>
                                     <figure class="border-radius-10">
                                       <img src="<%=product.productImage[1]%>" alt="">
                                   </figure>
                                   <figure class="border-radius-10">
                                       <img src="<%=product.productImage[2]%>" alt="">
                                   </figure>
                                   <figure class="border-radius-10">
                                       <img src="<%=product.productImage[3]%>" alt="">
                                   </figure>
                                   <figure class="border-radius-10">
                                       <img src="<%=product.productImage[4]%>" alt="">
                                   </figure>
                                 </div>
                                 <div  class="slider-nav-thumbnails pl-15 pr-15">
                                        <%for(let i = 0; i < product.productImage.length; i++){%>
                                       <div>
                                           <img style="object-fit:contain ;" src="<%=product.productImage[i]%>" alt="prouct-Image">
                                       </div>
                                       <%}%>
                                 </div>
                             </div>
                         </div>
                         <div class="col-md-6 col-sm-12 col-xs-12">
                             <div class="detail-info">
                                 <h2 class="title-detail"><%=product.productName%></h2>
                                 <div class="product-detail-rating">
                                     <div class="pro-details-brand">
                                         <!-- <span> Brands: <a href="#"><%=brand%></a></span> -->
                                         <p>Brands: <%= brand %></p>
                                     </div>
                                     <div class="product-rate-cover text-end">
                                         <div class="product-rate d-inline-block">
                                             <div class="product-rating" style="width:90%">
                                             </div>
                                         </div>
                                         <span class="font-small ml-5 text-muted"> (25 reviews)</span>
                                     </div>
                                 </div>
                                 <div class="clearfix product-price-cover">
                                     <div class="product-price primary-color float-left">
                                         <ins><span class="text-brand"><%=product.salePrice%></span></ins>
                                         <ins><span class="old-price font-md ml-15"><%=product.regularPrice%></span></ins>
                                         <span class="save-price  font-md color3 ml-15">
                                            <%if(!totalOffer){%>
                                                    No Offers

                                            <%}else{%>
                                                    <%=totalOffer%>% Offer
                                                <%}%>
                                       </span>
                                     </div>
                                 </div>
                                 <div class="bt-1 border-color-1 mt-15 mb-15"></div>
                                 <div class="short-desc mb-30">
                                     <p><%=product.description%></p>
                                 </div>
                                 <div class="product_sort_info font-xs mb-30">
                                     <ul>
                                         <li class="mb-10"><i class="fi-rs-crown mr-5"></i> 1 Year Brand Warranty</li>
                                         <li class="mb-10"><i class="fi-rs-refresh mr-5"></i> 30 Day Return Policy</li>
                                         <li><i class="fi-rs-credit-card mr-5"></i> Cash on Delivery available</li>
                                     </ul>
                                 </div>
                               
                                 <div class="bt-1 border-color-1 mt-30 mb-30"></div>
                                 <div class="detail-extralink">
                                     <div class="detail-qty border radius">
                                         <a href="#" class="qty-down" onclick="" ><i class="fi-rs-angle-small-down"></i></a>
                                         <span class="qty-val" id="quantity">1</span>
                                         <a href="#" class="qty-up" onclick=""><i class="fi-rs-angle-small-up"></i></a>
                                     </div>
                                     <div class="product-extra-link2">
                                      
                                         <button type="submit" class="button button-add-to-cart" onclick="addToCart('<%= product._id %>')">Add to cart</button>
                                       
                                         <a aria-label="Add To Wishlist" class="action-btn hover-up" href="#"><i class="fi-rs-heart"></i></a>
                                     </div>
                                 </div>
                                 <ul class="product-meta font-xs color-grey mt-50">
                                     <li class="mb-5">Stock Code: <a href="#" style="color: #05a03c;">FWM15VKT</a></li>
                                     <li class="mb-5">Tags: <a href="#" rel="tag"></a> <a href="#" rel="tag" style="color: #05a03c;"><%=category.name%></a> <a href="#" rel="tag"></a> </li>
                                     <li>Availability:<span class="in-stock text-success ml-5"><%=quantity%> Items in Stock</span></li>
                                 </ul>
                             </div>
                         </div>
                     </div>
                    
                 </div>
             </div>
         </div>
     </div>
 </section>
 <script>


  // Initialize Slick Slider
  $('.product-image-slider').slick({
      slidesToShow: 1,
      slidesToScroll: 1,
      arrows: false,
      fade: true,
      asNavFor: '.slider-nav-thumbnails'
  });
  
  $('.slider-nav-thumbnails').slick({
      slidesToShow: 5,
      slidesToScroll: 1,
      asNavFor: '.product-image-slider',
      dots: false,
      focusOnSelect: true,
      prevArrow: '<button type="button" class="slick-prev"><i class="fi-rs-angle-left"></i></button>',
      nextArrow: '<button type="button" class="slick-next"><i class="fi-rs-angle-right"></i></button>',
      responsive: [
          {
              breakpoint: 768,
              settings: {
                  slidesToShow: 4
              }
          },
          {
              breakpoint: 480,
              settings: {
                  slidesToShow: 3
              }
          }
      ]
  });
  
  // Image Zoom Functionality
  const productImages = document.querySelectorAll('.product-image-slider figure img');
  productImages.forEach(img => {
      img.addEventListener('click', function() {
          const zoomContainer = document.createElement('div');
          zoomContainer.className = 'zoomed';
          
          const zoomedImg = document.createElement('img');
          zoomedImg.src = this.src;
          
          zoomContainer.appendChild(zoomedImg);
          document.body.appendChild(zoomContainer);
          
          zoomContainer.addEventListener('click', function() {
              this.remove();
          });
      });
  });
  
  // Quantity Controls
  const qtyDown = document.querySelector('.qty-down');
  const qtyUp = document.querySelector('.qty-up');
  const qtyVal = document.querySelector('.qty-val');
  
  qtyDown.addEventListener('click', function(e) {
      e.preventDefault();
      const currentVal = parseInt(qtyVal.textContent);
      if(currentVal > 1) {
          qtyVal.textContent = currentVal - 1;
      }
  });
  
  qtyUp.addEventListener('click', function(e) {
      e.preventDefault();
      const currentVal = parseInt(qtyVal.textContent);
      qtyVal.textContent = currentVal + 1;
  });



  function addToCart(productId) {
    $.ajax({
        url: '/addToCart',
        method: 'POST',
        data: { productId: productId },
        success: function(response) {
            if (response.status === true) {
                // Update cart count
                $('#cartCount').text(response.cartLength);
                
                Swal.fire({
                    icon: 'success',
                    title: 'Added to Cart',
                    text: 'Product successfully added',
                    toast: true,
                    position: 'top-end',
                    showConfirmButton: false,
                    timer: 1500
                });
            } else if (response.status === "Out of stock") {
                Swal.fire({
                    icon: 'warning',
                    title: 'Out of Stock',
                    text: 'Cannot add more items',
                    toast: true,
                    position: 'top-end',
                    showConfirmButton: false,
                    timer: 2000
                });
            } else if (response.status === "Product not found") {
                Swal.fire({
                    icon: 'error',
                    title: 'Product Not Found',
                    toast: true,
                    position: 'top-end',
                    showConfirmButton: false,
                    timer: 2000
                });
            }
        },
        error: function() {
            Swal.fire({
                icon: 'error',
                title: 'Failed to add to cart',
                toast: true,
                position: 'top-end'
            });
        }
    });
}
  
  
  </script>
</main>

<%- include("../../views/partials/user/footer") %>



